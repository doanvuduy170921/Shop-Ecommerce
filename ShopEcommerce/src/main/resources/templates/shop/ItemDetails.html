<!DOCTYPE html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Chi Ti·∫øt S·∫£n Ph·∫©m</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
        />

        <!-- Swiper JS -->
        <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
        <link rel="stylesheet" th:href="@{/css/style.css}" />
        <link rel="stylesheet" th:href="@{/css/ItemDetails.css}" />
        <script>
            function changeMainImage(src) {
                document.getElementById("mainImage").src = src;
            }
            document.addEventListener("DOMContentLoaded", function () {
                let container = document.querySelector(".image-list");

                container.addEventListener("wheel", (e) => {
                    e.preventDefault();
                    container.scrollLeft += e.deltaY; // Chuy·ªÉn ƒë·ªông ngang thay v√¨ d·ªçc
                });
            });
        </script>
        <script th:inline="javascript">
            /* Ki·ªÉm tra n·∫øu c√≥ th√¥ng b√°o th√†nh c√¥ng t·ª´ server */

            /*<![CDATA[*/

            var successMessage = /*[[${successMessage}]]*/ null;

            if (successMessage && successMessage !== "null") {
                alert(successMessage);
            }

            /*]]>*/
        </script>
    </head>
    <body style="background-color: #f5f5f5">
        <th:block th:insert="~{component/header.html}"></th:block>
        <nav class="container container-item-detail mt-3 mb-3" aria-label="breadcrumb">
            <ol class="breadcrumb" style="margin-bottom: 0;">
                <li class="breadcrumb-item">
                    <a href="/">Trang ch·ªß</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="/category" th:href="@{/category/{id}(id=${product.category.id})}" th:text="${product.category.name}"></a>
                </li>
                <li class="breadcrumb-item active" aria-current="page" th:text="${product.name}"></li>
            </ol>
        </nav>
        
        <div
            class="container container-item-detail mb-3 pt-5"
        >
            <div class="row">
                <div class="col-md-4">
                    <img
                        id="mainImage"
                        th:src="${images[0]}"
                        onmouseover="changeMainImage(this.src)"
                        alt="S·∫£n ph·∫©m"
                        class="img-fluid rounded"
                    />
                    <div class="image-list mt-3">
                        <img
                            th:each="image, index : ${images}"
                            th:src="${image}"
                            onmouseover="changeMainImage(this.src)"
                            th:alt="'·∫¢nh ' + ${index}"
                            class="img-thumbnail me-2"
                        />
                    </div>
                </div>
                <div class="col-md-7">
                    <form action="/product/details/add-to-cart" method="post">
                        <input
                            type="hidden"
                            name="productId"
                            th:value="${product.id}"
                        />
                        <h3 th:text="${product.name}">
                            <!-- Chu·ªôt Ch∆°i Game C√≥ D√¢y USB, LED RGB Ergonomic 1200dpi -->
                        </h3>
                        <p class="text-warning">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 8k ƒë√°nh gi√°</p>
                        <h4
                            class="text-danger"
                            th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'"
                        >
                            <!-- ƒë33.000 - ƒë38.500 -->
                            <span
                                th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'"
                                class="text-secondary text-decoration-line-through"
                            >
                                <!-- ƒë52.800 -->
                            </span>
                        </h4>
                        <div class="mt-3">
                            <label class="fw-bold">M√†u s·∫Øc:</label>
                            <select class="form-select w-auto d-inline-block">
                                <option>ƒêen c√≥ bao b√¨</option>
                                <option>Tr·∫Øng c√≥ bao b√¨</option>
                            </select>
                        </div>
                        <div class="mt-3">
                            <label class="fw-bold">S·ªë l∆∞·ª£ng:</label>
                            <input
                                type="number"
                                name="quantity"
                                value="1"
                                min="1"
                                class="form-control w-auto d-inline-block"
                            />
                        </div>
                        <div class="mt-4">
                            <button th:action="@{/product/details/add-to-cart}" method="post" type="submit" class="btn btn-warning me-2">
                                Th√™m V√†o Gi·ªè H√†ng
                            </button>
                            <button class="btn btn-danger">Mua Ngay</button>
                        </div>

                    </form>
                </div>
            </div>
        </div>
        <div class="container md-4 mb-3">
            <div class="mt-3 details">
                <h5>Chi Ti·∫øt S·∫£n Ph·∫©m</h5>
                <ul class="pt-3">
                    <li th:each="entry : ${attributes}">
                        <label th:text="${entry.key} + ': '"></label>
                        <div th:text="${entry.value}"></div>
                    </li>
                </ul>
                <h5>M√¥ T·∫£ S·∫£n Ph·∫©m</h5>
                <div class="pt-3" style="padding-left: 2rem">
                    <p th:utext="${product.description}"></p>
                </div>
            </div>
        </div>
        <div class="container md-4 mb-3">
            <h4>ƒê√ÅNH GI√Å S·∫¢N PH·∫®M</h4>
            <div class="bg-light p-3 rounded d-flex">
                <div class="rating-overall me-3">
                    <!-- <h4 class="text-danger">4.8 tr√™n 5</h4>
                    <div class="text-warning fs-4">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div> -->
                    <h4>‚≠ê <span th:text="${averageRating}"></span>/5</h4>
                </div>
                <div class="mt-3">
                    <button class="btn btn-outline-danger btn-sm">
                        T·∫•t C·∫£
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                        5 Sao (7,1k)
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                        4 Sao (541)
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                        3 Sao (202)
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                        2 Sao (82)
                    </button>
                    <button class="btn btn-outline-secondary btn-sm">
                        1 Sao (150)
                    </button>
                </div>
            </div>

            <!-- ƒê√°nh gi√° 1 -->


            <div th:if="${#lists.isEmpty(ratings)}">
                <p>Ch∆∞a c√≥ ƒë√°nh gi√° n√†o.</p>
            </div>
            <ul th:unless="${#lists.isEmpty(ratings)}" style="padding-left: 0%;">
                <li th:each="_rating : ${ratings}" class="list-unstyled">
                    <div class="card mt-3">
                        <div class="card-body">
                            <div class="d-flex">
                                <!-- Avatar ng∆∞·ªùi d√πng -->
                                <img th:src="@{/images/default-avatar.png}"
                                    class="rounded-circle"
                                    width="50"
                                    height="50"
                                    alt="User"
                                />
                                <div class="ms-3">
                                    <h6 class="mb-1" th:text="${_rating.user.name}">T√™n ng∆∞·ªùi d√πng</h6>
                                    <p class="text-muted small">
                                        <span th:text="${#temporals.format(_rating.createdAt, 'yyyy-MM-dd HH:mm')}"></span> | 
                                        <!-- Ph√¢n lo·∫°i h√†ng: <span th:text="${_rating.category}">Kh√¥ng c√≥</span> -->
                                    </p>
                                    <!-- Hi·ªÉn th·ªã s·ªë sao (rating) -->
                                    <div class="text-warning">
                                        <span th:utext="${'‚≠ê'.repeat(_rating.rating)}"></span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- ƒê√°nh gi√° chi ti·∫øt -->
                            <!-- <p><strong>T√≠nh nƒÉng n·ªïi b·∫≠t:</strong> <span th:text="${rating.featureHighlight}"></span></p>
                            <p><strong>Ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m:</strong> <span th:text="${rating.quality}"></span></p> -->
                            <p th:text="${_rating.review}"></p>
            
                            <!-- ·∫¢nh ƒë√°nh gi√° (n·∫øu c√≥) -->
                            <!-- <div class="d-flex" th:if="${not #lists.isEmpty(rating.images)}">
                                <img th:each="img : ${rating.images}"
                                    th:src="${img}"
                                    class="me-2 rounded"
                                    width="100"
                                    alt="·∫¢nh ƒë√°nh gi√°"
                                />
                            </div> -->
                        </div>
                    </div>
                </li>
            </ul>

            <div class="card mt-3">
                <div class="card-body">
                    <div class="d-flex">
                        <img
                            src="https://www.gravatar.com/avatar/?d=identicon"
                            class="rounded-circle"
                            width="50"
                            height="50"
                            alt="User"
                        />
                        <div class="ms-3">
                            <h6 class="mb-1">2yn_qafxcn</h6>
                            <p class="text-muted small">
                                2024-09-22 16:53 | Ph√¢n lo·∫°i h√†ng: M√†u tr·∫Øng c√≥
                                bao b√¨
                            </p>
                            <div class="text-warning">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        </div>
                    </div>
                    <p><strong>T√≠nh nƒÉng n·ªïi b·∫≠t:</strong> qu√° ok</p>
                    <p><strong>Ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m:</strong> qu√° t·ªët</p>
                    <p>
                        √öi gi·ªùi ∆°i ƒë·∫πp th·∫ßn s·∫ßu lu√¥n c·∫£ nh√† ∆°i. ƒê·ªïi m√†u nh·∫π
                        nh√†ng thanh tho√°t. Con lƒÉn chu·ªôt si√™u √™m. Chu·ªôt x√†i si√™u
                        ƒë√£. Gi√° c·ª±c k·ª≥ t·ªët. Giao nhanh. ƒê√≥ng g√≥i c·∫©n th·∫≠n. N√™n
                        mua l·∫Øm ·∫°.
                    </p>
                    <!-- <div class="d-flex">
                        <img
                            src="https://via.placeholder.com/100"
                            class="me-2 rounded"
                            width="100"
                            alt="·∫¢nh ƒë√°nh gi√°"
                        />
                        <img
                            src="https://via.placeholder.com/100"
                            class="me-2 rounded"
                            width="100"
                            alt="·∫¢nh ƒë√°nh gi√°"
                        />
                    </div>
                    <div class="mt-2 text-muted small">üëç 6</div> -->
                </div>
            </div>

            <!-- ƒê√°nh gi√° 2 -->
            <div class="card mt-3">
                <div class="card-body">
                    <div class="d-flex">
                        <img
                            src="https://www.gravatar.com/avatar/?d=identicon"
                            class="rounded-circle"
                            width="50"
                            height="50"
                            alt="User"
                        />
                        <div class="ms-3">
                            <h6 class="mb-1">h*****5</h6>
                            <p class="text-muted small">
                                2024-10-23 00:31 | Ph√¢n lo·∫°i h√†ng: ƒêen c√≥ bao b√¨
                            </p>
                            <div class="text-warning">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                        </div>
                    </div>
                    <p><strong>T√≠nh nƒÉng n·ªïi b·∫≠t:</strong> t·ªët</p>
                    <p><strong>Ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m:</strong> t·ªët</p>
                    <p>
                        S·∫£n ph·∫©m r·∫•t m∆∞·ª£t m√† ch·∫°y t·ªët c√≥ ƒë√®n r·∫•t ƒë·∫πp l·∫ßn sau s·∫Ω
                        mua ·ªßng h·ªô shop ti·∫øp
                    </p>
                    <div class="d-flex">
                        <img
                            src="https://via.placeholder.com/100"
                            class="me-2 rounded"
                            width="100"
                            alt="·∫¢nh ƒë√°nh gi√°"
                        />
                        <img
                            src="https://via.placeholder.com/100"
                            class="me-2 rounded"
                            width="100"
                            alt="·∫¢nh ƒë√°nh gi√°"
                        />
                    </div>
                    <div class="mt-2 text-muted small">üëç 6</div>
                </div>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
